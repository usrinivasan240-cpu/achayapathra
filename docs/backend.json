
{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user in the Achayapathra application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the User entity."
        },
        "email": {
          "type": "string",
          "description": "User's email address.",
          "format": "email"
        },
        "phoneNumber": {
          "type": "string",
          "description": "User's phone number."
        },
        "displayName": {
          "type": "string",
          "description": "User's display name."
        },
        "photoURL": {
          "type": "string",
          "description": "URL of the user's profile photo.",
          "format": "uri"
        },
        "role": {
          "type": "string",
          "description": "User's role (e.g., donor, receiver, volunteer, admin)."
        },
        "verified": {
          "type": "boolean",
          "description": "Indicates whether the user's identity is verified."
        },
        "points": {
          "type": "number",
          "description": "User's reward points."
        },
        "location": {
          "type": "string",
          "description": "User's location (e.g., coordinates or address)."
        },
        "identityId": {
          "type": "string",
          "description": "Unique identifier for the user's verified identity."
        }
      },
      "required": [
        "id",
        "email",
        "role",
        "verified",
        "points",
        "location",
        "identityId"
      ]
    },
    "Donation": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Donation",
      "type": "object",
      "description": "Represents a food donation.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Donation entity."
        },
        "donorId": {
          "type": "string",
          "description": "Reference to User (Donor). (Relationship: User 1:N Donation)"
        },
        "foodName": {
          "type": "string",
          "description": "Name of the food item."
        },
        "foodType": {
          "type": "string",
          "description": "Type of food (e.g., cooked, perishable)."
        },
        "cookedTime": {
          "type": "string",
          "description": "Time when the food was cooked.",
          "format": "date-time"
        },
        "expiryTime": {
          "type": "string",
          "description": "Expiration date and time of the food.",
          "format": "date-time"
        },
        "quantity": {
          "type": "string",
          "description": "Quantity of food available for donation."
        },
        "description": {
          "type": "string",
          "description": "Optional description of the food donation."
        },
        "location": {
          "type": "string",
          "description": "Location where the food can be picked up."
        },
        "status": {
          "type": "string",
          "description": "Status of the donation (e.g., available, picked up, delivered, pending)."
        },
        "imageURL": {
            "type": "string",
            "description": "URL of the food donation image."
        },
        "aiImageAnalysis": {
            "type": "string",
            "description": "AI analysis result of the food image."
        },
        "claimedBy": {
          "type": "string",
          "description": "ID of the user who claimed the donation."
        }
      },
      "required": [
        "id",
        "donorId",
        "foodName",
        "foodType",
        "cookedTime",
        "expiryTime",
        "quantity",
        "location",
        "status"
      ]
    },
    "VolunteerTask": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "VolunteerTask",
      "type": "object",
      "description": "Represents a volunteer task for picking up or delivering donations.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the VolunteerTask entity."
        },
        "volunteerId": {
          "type": "string",
          "description": "Reference to User (Volunteer). (Relationship: User 1:N VolunteerTask)"
        },
        "donationId": {
          "type": "string",
          "description": "Reference to Donation. (Relationship: Donation 1:N VolunteerTask)"
        },
        "type": {
          "type": "string",
          "description": "Type of volunteer task (e.g., pickup, delivery)."
        },
        "status": {
          "type": "string",
          "description": "Status of the volunteer task (e.g., pending, in progress, completed)."
        }
      },
      "required": [
        "id",
        "volunteerId",
        "donationId",
        "type",
        "status"
      ]
    },
    "Feedback": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Feedback",
      "type": "object",
      "description": "Represents feedback given for a donation or volunteer task.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Feedback entity."
        },
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:N Feedback)"
        },
        "donationId": {
          "type": "string",
          "description": "Reference to Donation. (Relationship: Donation 1:N Feedback)"
        },
        "rating": {
          "type": "number",
          "description": "Rating given (e.g., 1 to 5 stars)."
        },
        "comment": {
          "type": "string",
          "description": "Optional comment associated with the feedback."
        }
      },
      "required": [
        "id",
        "userId",
        "donationId",
        "rating"
      ]
    },
    "Leaderboard": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Leaderboard",
      "type": "object",
      "description": "Represents the leaderboard data for top donors and volunteers.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Leaderboard entity."
        },
        "date": {
          "type": "string",
          "description": "Date for which the leaderboard is generated.",
          "format": "date-time"
        },
        "topDonors": {
          "type": "array",
          "description": "Array of user IDs of the top donors.",
          "items": {
            "type": "string"
          }
        },
        "topVolunteers": {
          "type": "array",
          "description": "Array of user IDs of the top volunteers.",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "id",
        "date",
        "topDonors",
        "topVolunteers"
      ]
    },
    "SiteStats": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "SiteStats",
      "type": "object",
      "description": "Represents site statistics related to hunger data.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the SiteStats entity."
        },
        "date": {
          "type": "string",
          "description": "Date for which the statistics are recorded.",
          "format": "date-time"
        },
        "hungerData": {
          "type": "string",
          "description": "Data related to hunger statistics (e.g., number of people fed)."
        }
      },
      "required": [
        "id",
        "date",
        "hungerData"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "/users/{userId}": {
      "schema": {
        "$ref": "#/entities/User"
      },
      "description": "Stores user profiles. Only the user and admins can read their own profile. The leaderboard can list users by points."
    },
    "/donations/{donationId}": {
      "schema": {
        "$ref": "#/entities/Donation"
      },
      "description": "Stores all donations. Only owners can create/update/delete their own donations. Any signed-in user can view donations."
    },
    "/volunteerTasks/{volunteerTaskId}": {
      "schema": {
        "$ref": "#/entities/VolunteerTask"
      },
      "description": "Stores volunteer tasks. Includes references to 'volunteerId' and 'donationId'."
    },
    "/feedbacks/{feedbackId}": {
      "schema": {
        "$ref": "#/entities/Feedback"
      },
      "description": "Stores feedback for donations and volunteer tasks. Includes references to 'userId' and 'donationId'."
    },
    "/leaderboard/{leaderboardId}": {
      "schema": {
        "$ref": "#/entities/Leaderboard"
      },
      "description": "Stores leaderboard data. Publicly readable."
    },
    "/siteStats/{siteStatsId}": {
      "schema": {
        "$ref": "#/entities/SiteStats"
      },
      "description": "Stores site statistics. Admin-only access."
    },
    "/roles_admin/{userId}": {
      "schema": {
        "$ref": "#/entities/User"
      },
      "description": "Collection to store admin roles. Existence of a document grants admin privileges."
    }
  }
}
